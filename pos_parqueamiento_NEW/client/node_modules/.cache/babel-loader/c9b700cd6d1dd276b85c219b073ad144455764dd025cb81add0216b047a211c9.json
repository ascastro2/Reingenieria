{"ast":null,"code":"import _objectSpread from\"C:/Users/Asus/Documents/GitHub/Reingenieria/pos_parqueamiento_NEW/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Box,Typography,Button,Card,CardContent,Grid,Chip,IconButton,Tooltip,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,Alert,CircularProgress,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination}from'@mui/material';import{Add as AddIcon,Receipt as ReceiptIcon,Refresh as RefreshIcon,CheckCircle as CheckCircleIcon,Cancel as CancelIcon,Visibility as VisibilityIcon}from'@mui/icons-material';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Ventas=()=>{const[ventas,setVentas]=useState([]);const[espacios,setEspacios]=useState([]);const[clientes,setClientes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[openDialog,setOpenDialog]=useState(false);const[openFinalizarDialog,setOpenFinalizarDialog]=useState(false);const[openCancelarDialog,setOpenCancelarDialog]=useState(false);const[selectedVenta,setSelectedVenta]=useState(null);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[searchTerm,setSearchTerm]=useState('');const[formData,setFormData]=useState({id_espacio:0,id_cliente:undefined,placa_vehiculo:'',tipo_vehiculo:'auto',observaciones:''});const[finalizarForm,setFinalizarForm]=useState({observaciones_salida:''});const[cancelarForm,setCancelarForm]=useState({motivo_cancelacion:''});const fetchData=async()=>{try{setLoading(true);setError(null);const[ventasResponse,espaciosResponse,clientesResponse]=await Promise.all([axios.get('/api/ventas'),axios.get('/api/espacios/libres'),axios.get('/api/clientes')]);console.log('Ventas recibidas:',ventasResponse.data.data);console.log('Espacios recibidos:',espaciosResponse.data.data);console.log('Clientes recibidos:',clientesResponse.data.data);setVentas(ventasResponse.data.data);setEspacios(espaciosResponse.data.data);setClientes(clientesResponse.data.data);}catch(error){console.error('Error al cargar datos:',error);setError('Error al cargar los datos');}finally{setLoading(false);}};useEffect(()=>{fetchData();},[]);const handleOpenDialog=()=>{setFormData({id_espacio:0,id_cliente:undefined,placa_vehiculo:'',tipo_vehiculo:'auto',observaciones:''});setOpenDialog(true);};const handleCloseDialog=()=>{setOpenDialog(false);setFormData({id_espacio:0,id_cliente:undefined,placa_vehiculo:'',tipo_vehiculo:'auto',observaciones:''});};const handleSubmit=async()=>{try{if(!formData.id_espacio||!formData.placa_vehiculo.trim()){setError('Por favor complete todos los campos requeridos');return;}await axios.post('/api/ventas',formData);fetchData();handleCloseDialog();}catch(error){var _error$response,_error$response$data;console.error('Error al crear venta:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error al crear la venta');}};const handleFinalizar=async()=>{if(!selectedVenta)return;try{await axios.put(\"/api/ventas/\".concat(selectedVenta.id_venta,\"/finalizar\"),finalizarForm);fetchData();setOpenFinalizarDialog(false);setSelectedVenta(null);setFinalizarForm({observaciones_salida:''});}catch(error){var _error$response2,_error$response2$data;console.error('Error al finalizar venta:',error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Error al finalizar la venta');}};const handleCancelar=async()=>{if(!selectedVenta)return;try{await axios.put(\"/api/ventas/\".concat(selectedVenta.id_venta,\"/cancelar\"),cancelarForm);fetchData();setOpenCancelarDialog(false);setSelectedVenta(null);setCancelarForm({motivo_cancelacion:''});}catch(error){var _error$response3,_error$response3$data;console.error('Error al cancelar venta:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Error al cancelar la venta');}};const openFinalizarVenta=venta=>{if(!venta||!venta.id_venta){console.error('Venta inválida para finalizar:',venta);return;}setSelectedVenta(venta);setOpenFinalizarDialog(true);};const openCancelarVenta=venta=>{if(!venta||!venta.id_venta){console.error('Venta inválida para cancelar:',venta);return;}setSelectedVenta(venta);setOpenCancelarDialog(true);};const filteredVentas=ventas.filter(venta=>{// Validar que la venta tenga al menos los campos mínimos para mostrar\nif(!venta||!venta.id_venta){console.warn('Venta sin ID:',venta);return false;}// Si no hay término de búsqueda, mostrar todas las ventas válidas\nif(!searchTerm.trim()){return true;}// Validar que searchTerm no sea undefined\nconst searchLower=searchTerm.toLowerCase();return(venta.placa_vehiculo||'').toLowerCase().includes(searchLower)||(venta.numero_espacio||'').toLowerCase().includes(searchLower)||(venta.nombre_cliente||'').toLowerCase().includes(searchLower)||(venta.apellido_cliente||'').toLowerCase().includes(searchLower);});const paginatedVentas=filteredVentas.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage);const getStatusColor=estado=>{if(!estado)return'default';switch(estado){case'activa':return'warning';case'finalizada':return'success';case'cancelada':return'error';default:return'default';}};const getStatusLabel=estado=>{if(!estado)return'N/A';switch(estado){case'activa':return'Activa';case'finalizada':return'Finalizada';case'cancelada':return'Cancelada';default:return estado;}};const formatCurrency=amount=>{if(!amount||isNaN(amount))return'S/ 0.00';return new Intl.NumberFormat('es-PE',{style:'currency',currency:'PEN'}).format(amount);};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"400px\",children:/*#__PURE__*/_jsx(CircularProgress,{size:60})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:4},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,sx:{color:'#1976d2',fontWeight:600},children:\"\\uD83D\\uDCB0 Gesti\\xF3n de Ventas\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:\"Administra las ventas y facturaci\\xF3n del sistema\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:handleOpenDialog,sx:{bgcolor:'#1976d2'},children:\"Nueva Venta\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"primary\",children:ventas.length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Total de Ventas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"warning.main\",children:ventas.filter(v=>v.estado==='activa').length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Ventas Activas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:ventas.filter(v=>v.estado==='finalizada').length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Ventas Finalizadas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"error.main\",children:ventas.filter(v=>v.estado==='cancelada').length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Ventas Canceladas\"})]})})})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},onClose:()=>setError(null),children:error}),/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Buscar por placa, espacio o cliente...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(ReceiptIcon,{sx:{mr:1,color:'text.secondary'}})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,textAlign:\"right\",children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:fetchData,variant:\"outlined\",children:\"Actualizar\"})})]})})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{mb:3},children:\"Lista de Ventas\"}),paginatedVentas.length===0?/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',py:4,color:'text.secondary'},children:[/*#__PURE__*/_jsx(ReceiptIcon,{sx:{fontSize:60,mb:2,opacity:0.3}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"No hay ventas registradas\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Comienza creando la primera venta de parqueamiento.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Fecha\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Espacio\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Veh\\xEDculo\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Cliente\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Estado\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Monto\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:paginatedVentas.map(venta=>{// Validar que la venta tenga al menos los campos mínimos\nif(!venta||!venta.id_venta){console.warn('Venta inválida en renderizado:',venta);return null;}return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",fontWeight:600,children:[\"#\",venta.id_venta]})}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:new Date(venta.fecha_venta).toLocaleDateString()}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(venta.hora_entrada).toLocaleTimeString()})]}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:venta.numero_espacio||'N/A',color:\"primary\",size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:600,children:venta.placa_vehiculo||'Sin placa'}),/*#__PURE__*/_jsx(Chip,{label:venta.tipo_vehiculo||'N/A',color:\"secondary\",size:\"small\"})]})}),/*#__PURE__*/_jsx(TableCell,{children:venta.nombre_cliente?/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[venta.nombre_cliente,\" \",venta.apellido_cliente]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Sin cliente\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getStatusLabel(venta.estado),color:getStatusColor(venta.estado),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:venta.monto_total?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:600,color:\"success.main\",children:formatCurrency(venta.monto_total)}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Pendiente\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Ver detalles\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"primary\",children:/*#__PURE__*/_jsx(VisibilityIcon,{})})}),venta.estado==='activa'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Finalizar venta\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"success\",onClick:()=>openFinalizarVenta(venta),children:/*#__PURE__*/_jsx(CheckCircleIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Cancelar venta\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>openCancelarVenta(venta),children:/*#__PURE__*/_jsx(CancelIcon,{})})})]})]})})]},venta.id_venta);})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:filteredVentas.length,rowsPerPage:rowsPerPage,page:page,onPageChange:(_,newPage)=>setPage(newPage),onRowsPerPageChange:e=>{setRowsPerPage(parseInt(e.target.value,10));setPage(0);}})]})]})}),/*#__PURE__*/_jsxs(Dialog,{open:openDialog,onClose:handleCloseDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(AddIcon,{color:\"primary\"}),\"Nueva Venta de Parqueamiento\"]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Espacio\"}),/*#__PURE__*/_jsx(Select,{value:formData.id_espacio,label:\"Espacio\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{id_espacio:e.target.value})),children:espacios.map(espacio=>/*#__PURE__*/_jsxs(MenuItem,{value:espacio.id_espacio,children:[espacio.numero_espacio,\" - \",espacio.tipo_vehiculo,\" (S/ \",typeof espacio.tarifa_hora==='number'?espacio.tarifa_hora:0,\"/h)\"]},espacio.id_espacio))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Cliente (Opcional)\"}),/*#__PURE__*/_jsxs(Select,{value:formData.id_cliente||'',label:\"Cliente (Opcional)\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{id_cliente:e.target.value||undefined})),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Sin cliente\"}),clientes.map(cliente=>/*#__PURE__*/_jsxs(MenuItem,{value:cliente.idCliente,children:[cliente.Nombre_Cliente,\" \",cliente.Apellido_Cliente]},cliente.idCliente))]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Placa del Veh\\xEDculo *\",value:formData.placa_vehiculo,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{placa_vehiculo:e.target.value.toUpperCase()})),required:true,placeholder:\"ABC-123\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Tipo de Veh\\xEDculo\"}),/*#__PURE__*/_jsxs(Select,{value:formData.tipo_vehiculo,label:\"Tipo de Veh\\xEDculo\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{tipo_vehiculo:e.target.value})),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"auto\",children:\"Auto\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"camioneta\",children:\"Camioneta\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"camion\",children:\"Cami\\xF3n\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"moto\",children:\"Moto\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Observaciones\",value:formData.observaciones,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{observaciones:e.target.value})),multiline:true,rows:3,placeholder:\"Observaciones adicionales sobre la venta...\"})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",sx:{bgcolor:'#1976d2'},children:\"Crear Venta\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openFinalizarDialog,onClose:()=>setOpenFinalizarDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"success\"}),\"Finalizar Venta #\",selectedVenta===null||selectedVenta===void 0?void 0:selectedVenta.id_venta]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,children:\"\\xBFEst\\xE1s seguro de que quieres finalizar esta venta?\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Se calcular\\xE1 el monto total basado en el tiempo transcurrido.\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Observaciones de Salida\",value:finalizarForm.observaciones_salida,onChange:e=>setFinalizarForm({observaciones_salida:e.target.value}),multiline:true,rows:3,placeholder:\"Observaciones sobre la salida del veh\\xEDculo...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenFinalizarDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleFinalizar,variant:\"contained\",color:\"success\",children:\"Finalizar Venta\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openCancelarDialog,onClose:()=>setOpenCancelarDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(CancelIcon,{color:\"error\"}),\"Cancelar Venta #\",selectedVenta===null||selectedVenta===void 0?void 0:selectedVenta.id_venta]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,children:\"\\xBFEst\\xE1s seguro de que quieres cancelar esta venta?\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Esta acci\\xF3n liberar\\xE1 el espacio de parqueamiento.\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Motivo de Cancelaci\\xF3n *\",value:cancelarForm.motivo_cancelacion,onChange:e=>setCancelarForm({motivo_cancelacion:e.target.value}),multiline:true,rows:3,placeholder:\"Especifica el motivo de la cancelaci\\xF3n...\",required:true})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenCancelarDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCancelar,variant:\"contained\",color:\"error\",children:\"Cancelar Venta\"})]})]})]});};export default Ventas;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Button","Card","CardContent","Grid","Chip","IconButton","Tooltip","Dialog","DialogTitle","DialogContent","DialogActions","TextField","FormControl","InputLabel","Select","MenuItem","Alert","CircularProgress","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","Add","AddIcon","Receipt","ReceiptIcon","Refresh","RefreshIcon","CheckCircle","CheckCircleIcon","Cancel","CancelIcon","Visibility","VisibilityIcon","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Ventas","ventas","setVentas","espacios","setEspacios","clientes","setClientes","loading","setLoading","error","setError","openDialog","setOpenDialog","openFinalizarDialog","setOpenFinalizarDialog","openCancelarDialog","setOpenCancelarDialog","selectedVenta","setSelectedVenta","page","setPage","rowsPerPage","setRowsPerPage","searchTerm","setSearchTerm","formData","setFormData","id_espacio","id_cliente","undefined","placa_vehiculo","tipo_vehiculo","observaciones","finalizarForm","setFinalizarForm","observaciones_salida","cancelarForm","setCancelarForm","motivo_cancelacion","fetchData","ventasResponse","espaciosResponse","clientesResponse","Promise","all","get","console","log","data","handleOpenDialog","handleCloseDialog","handleSubmit","trim","post","_error$response","_error$response$data","response","handleFinalizar","put","concat","id_venta","_error$response2","_error$response2$data","handleCancelar","_error$response3","_error$response3$data","openFinalizarVenta","venta","openCancelarVenta","filteredVentas","filter","warn","searchLower","toLowerCase","includes","numero_espacio","nombre_cliente","apellido_cliente","paginatedVentas","slice","getStatusColor","estado","getStatusLabel","formatCurrency","amount","isNaN","Intl","NumberFormat","style","currency","format","display","justifyContent","alignItems","minHeight","children","size","sx","mb","variant","component","gutterBottom","color","fontWeight","startIcon","onClick","bgcolor","container","spacing","item","xs","sm","md","textAlign","length","v","severity","onClose","fullWidth","placeholder","value","onChange","e","target","InputProps","startAdornment","mr","py","fontSize","opacity","map","hover","Date","fecha_venta","toLocaleDateString","hora_entrada","toLocaleTimeString","label","monto_total","gap","title","rowsPerPageOptions","count","onPageChange","_","newPage","onRowsPerPageChange","parseInt","open","maxWidth","mt","required","_objectSpread","espacio","tarifa_hora","cliente","idCliente","Nombre_Cliente","Apellido_Cliente","toUpperCase","multiline","rows"],"sources":["C:/Users/Asus/Documents/GitHub/Reingenieria/pos_parqueamiento_NEW/client/src/pages/Ventas/Ventas.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Alert,\r\n  CircularProgress,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TablePagination\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Receipt as ReceiptIcon,\r\n  Refresh as RefreshIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n  Cancel as CancelIcon,\r\n  Visibility as VisibilityIcon\r\n} from '@mui/icons-material';\r\n\r\nimport axios from 'axios';\r\n\r\ninterface Venta {\r\n  id_venta: number;\r\n  fecha_venta: string;\r\n  hora_entrada: string;\r\n  hora_salida?: string | null;\r\n  tiempo_total?: number | null;\r\n  tarifa_hora: number | null;\r\n  monto_total?: number | null;\r\n  estado: 'activa' | 'finalizada' | 'cancelada' | null;\r\n  id_cliente?: number | null;\r\n  id_espacio: number;\r\n  id_usuario: number;\r\n  placa_vehiculo: string | null;\r\n  tipo_vehiculo: string | null;\r\n  observaciones?: string | null;\r\n  observaciones_salida?: string | null;\r\n  motivo_cancelacion?: string | null;\r\n  // Campos relacionados\r\n  nombre_cliente?: string | null;\r\n  apellido_cliente?: string | null;\r\n  numero_espacio?: string | null;\r\n  nombre_usuario?: string | null;\r\n}\r\n\r\ninterface VentaForm {\r\n  id_espacio: number;\r\n  id_cliente?: number;\r\n  placa_vehiculo: string;\r\n  tipo_vehiculo: string;\r\n  observaciones: string;\r\n}\r\n\r\ninterface Espacio {\r\n  id_espacio: number;\r\n  numero_espacio: string;\r\n  tipo_vehiculo: string;\r\n  tarifa_hora: number;\r\n  estado: string;\r\n}\r\n\r\ninterface Cliente {\r\n  idCliente: number;\r\n  Nombre_Cliente: string;\r\n  Apellido_Cliente: string;\r\n  ruc_Cliente?: string;\r\n}\r\n\r\nconst Ventas: React.FC = () => {\r\n\r\n  const [ventas, setVentas] = useState<Venta[]>([]);\r\n  const [espacios, setEspacios] = useState<Espacio[]>([]);\r\n  const [clientes, setClientes] = useState<Cliente[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [openFinalizarDialog, setOpenFinalizarDialog] = useState(false);\r\n  const [openCancelarDialog, setOpenCancelarDialog] = useState(false);\r\n  const [selectedVenta, setSelectedVenta] = useState<Venta | null>(null);\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const [formData, setFormData] = useState<VentaForm>({\r\n    id_espacio: 0,\r\n    id_cliente: undefined,\r\n    placa_vehiculo: '',\r\n    tipo_vehiculo: 'auto',\r\n    observaciones: ''\r\n  });\r\n\r\n  const [finalizarForm, setFinalizarForm] = useState({\r\n    observaciones_salida: ''\r\n  });\r\n\r\n  const [cancelarForm, setCancelarForm] = useState({\r\n    motivo_cancelacion: ''\r\n  });\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const [ventasResponse, espaciosResponse, clientesResponse] = await Promise.all([\r\n        axios.get('/api/ventas'),\r\n        axios.get('/api/espacios/libres'),\r\n        axios.get('/api/clientes')\r\n      ]);\r\n\r\n      console.log('Ventas recibidas:', ventasResponse.data.data);\r\n      console.log('Espacios recibidos:', espaciosResponse.data.data);\r\n      console.log('Clientes recibidos:', clientesResponse.data.data);\r\n      \r\n      setVentas(ventasResponse.data.data);\r\n      setEspacios(espaciosResponse.data.data);\r\n      setClientes(clientesResponse.data.data);\r\n    } catch (error: any) {\r\n      console.error('Error al cargar datos:', error);\r\n      setError('Error al cargar los datos');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleOpenDialog = () => {\r\n    setFormData({\r\n      id_espacio: 0,\r\n      id_cliente: undefined,\r\n      placa_vehiculo: '',\r\n      tipo_vehiculo: 'auto',\r\n      observaciones: ''\r\n    });\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    setOpenDialog(false);\r\n    setFormData({\r\n      id_espacio: 0,\r\n      id_cliente: undefined,\r\n      placa_vehiculo: '',\r\n      tipo_vehiculo: 'auto',\r\n      observaciones: ''\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      if (!formData.id_espacio || !formData.placa_vehiculo.trim()) {\r\n        setError('Por favor complete todos los campos requeridos');\r\n        return;\r\n      }\r\n\r\n      await axios.post('/api/ventas', formData);\r\n      fetchData();\r\n      handleCloseDialog();\r\n    } catch (error: any) {\r\n      console.error('Error al crear venta:', error);\r\n      setError(error.response?.data?.error || 'Error al crear la venta');\r\n    }\r\n  };\r\n\r\n  const handleFinalizar = async () => {\r\n    if (!selectedVenta) return;\r\n    \r\n    try {\r\n      await axios.put(`/api/ventas/${selectedVenta.id_venta}/finalizar`, finalizarForm);\r\n      fetchData();\r\n      setOpenFinalizarDialog(false);\r\n      setSelectedVenta(null);\r\n      setFinalizarForm({ observaciones_salida: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al finalizar venta:', error);\r\n      setError(error.response?.data?.error || 'Error al finalizar la venta');\r\n    }\r\n  };\r\n\r\n  const handleCancelar = async () => {\r\n    if (!selectedVenta) return;\r\n    \r\n    try {\r\n      await axios.put(`/api/ventas/${selectedVenta.id_venta}/cancelar`, cancelarForm);\r\n      fetchData();\r\n      setOpenCancelarDialog(false);\r\n      setSelectedVenta(null);\r\n      setCancelarForm({ motivo_cancelacion: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al cancelar venta:', error);\r\n      setError(error.response?.data?.error || 'Error al cancelar la venta');\r\n    }\r\n  };\r\n\r\n  const openFinalizarVenta = (venta: Venta) => {\r\n    if (!venta || !venta.id_venta) {\r\n      console.error('Venta inválida para finalizar:', venta);\r\n      return;\r\n    }\r\n    setSelectedVenta(venta);\r\n    setOpenFinalizarDialog(true);\r\n  };\r\n\r\n  const openCancelarVenta = (venta: Venta) => {\r\n    if (!venta || !venta.id_venta) {\r\n      console.error('Venta inválida para cancelar:', venta);\r\n      return;\r\n    }\r\n    setSelectedVenta(venta);\r\n    setOpenCancelarDialog(true);\r\n  };\r\n\r\n  const filteredVentas = ventas.filter(venta => {\r\n    // Validar que la venta tenga al menos los campos mínimos para mostrar\r\n    if (!venta || !venta.id_venta) {\r\n      console.warn('Venta sin ID:', venta);\r\n      return false;\r\n    }\r\n    \r\n    // Si no hay término de búsqueda, mostrar todas las ventas válidas\r\n    if (!searchTerm.trim()) {\r\n      return true;\r\n    }\r\n    \r\n    // Validar que searchTerm no sea undefined\r\n    const searchLower = searchTerm.toLowerCase();\r\n    \r\n    return (\r\n      (venta.placa_vehiculo || '').toLowerCase().includes(searchLower) ||\r\n      (venta.numero_espacio || '').toLowerCase().includes(searchLower) ||\r\n      (venta.nombre_cliente || '').toLowerCase().includes(searchLower) ||\r\n      (venta.apellido_cliente || '').toLowerCase().includes(searchLower)\r\n    );\r\n  });\r\n\r\n  const paginatedVentas = filteredVentas.slice(\r\n    page * rowsPerPage,\r\n    page * rowsPerPage + rowsPerPage\r\n  );\r\n\r\n  const getStatusColor = (estado: string | null | undefined) => {\r\n    if (!estado) return 'default';\r\n    \r\n    switch (estado) {\r\n      case 'activa':\r\n        return 'warning';\r\n      case 'finalizada':\r\n        return 'success';\r\n      case 'cancelada':\r\n        return 'error';\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (estado: string | null | undefined) => {\r\n    if (!estado) return 'N/A';\r\n    \r\n    switch (estado) {\r\n      case 'activa':\r\n        return 'Activa';\r\n      case 'finalizada':\r\n        return 'Finalizada';\r\n      case 'cancelada':\r\n        return 'Cancelada';\r\n      default:\r\n        return estado;\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    if (!amount || isNaN(amount)) return 'S/ 0.00';\r\n    \r\n    return new Intl.NumberFormat('es-PE', {\r\n      style: 'currency',\r\n      currency: 'PEN'\r\n    }).format(amount);\r\n  };\r\n\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n        <CircularProgress size={60} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {/* Header */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\r\n        <Box>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ color: '#1976d2', fontWeight: 600 }}>\r\n            💰 Gestión de Ventas\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\">\r\n            Administra las ventas y facturación del sistema\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<AddIcon />}\r\n          onClick={handleOpenDialog}\r\n          sx={{ bgcolor: '#1976d2' }}\r\n        >\r\n          Nueva Venta\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Estadísticas rápidas */}\r\n      <Grid container spacing={3} sx={{ mb: 4 }}>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"primary\">\r\n                {ventas.length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Total de Ventas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"warning.main\">\r\n                {ventas.filter(v => v.estado === 'activa').length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Ventas Activas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"success.main\">\r\n                {ventas.filter(v => v.estado === 'finalizada').length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Ventas Finalizadas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"error.main\">\r\n                {ventas.filter(v => v.estado === 'cancelada').length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Ventas Canceladas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Mensaje de error */}\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Filtros y búsqueda */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Grid container spacing={2} alignItems=\"center\">\r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                fullWidth\r\n                placeholder=\"Buscar por placa, espacio o cliente...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                InputProps={{\r\n                  startAdornment: <ReceiptIcon sx={{ mr: 1, color: 'text.secondary' }} />\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={6} textAlign=\"right\">\r\n              <Button\r\n                startIcon={<RefreshIcon />}\r\n                onClick={fetchData}\r\n                variant=\"outlined\"\r\n              >\r\n                Actualizar\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Tabla de ventas */}\r\n      <Card>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom sx={{ mb: 3 }}>\r\n            Lista de Ventas\r\n          </Typography>\r\n\r\n          {paginatedVentas.length === 0 ? (\r\n            <Box sx={{ textAlign: 'center', py: 4, color: 'text.secondary' }}>\r\n              <ReceiptIcon sx={{ fontSize: 60, mb: 2, opacity: 0.3 }} />\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                No hay ventas registradas\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                Comienza creando la primera venta de parqueamiento.\r\n              </Typography>\r\n            </Box>\r\n          ) : (\r\n            <>\r\n              <TableContainer component={Paper}>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>ID</TableCell>\r\n                      <TableCell>Fecha</TableCell>\r\n                      <TableCell>Espacio</TableCell>\r\n                      <TableCell>Vehículo</TableCell>\r\n                      <TableCell>Cliente</TableCell>\r\n                      <TableCell>Estado</TableCell>\r\n                      <TableCell>Monto</TableCell>\r\n                      <TableCell>Acciones</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                                                              {paginatedVentas.map((venta) => {\r\n                       // Validar que la venta tenga al menos los campos mínimos\r\n                       if (!venta || !venta.id_venta) {\r\n                         console.warn('Venta inválida en renderizado:', venta);\r\n                         return null;\r\n                       }\r\n                       \r\n                       return (\r\n                         <TableRow key={venta.id_venta} hover>\r\n                           <TableCell>\r\n                             <Typography variant=\"body2\" fontWeight={600}>\r\n                               #{venta.id_venta}\r\n                             </Typography>\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             <Typography variant=\"body2\">\r\n                               {new Date(venta.fecha_venta).toLocaleDateString()}\r\n                             </Typography>\r\n                             <Typography variant=\"caption\" color=\"text.secondary\">\r\n                               {new Date(venta.hora_entrada).toLocaleTimeString()}\r\n                             </Typography>\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             <Chip \r\n                               label={venta.numero_espacio || 'N/A'} \r\n                               color=\"primary\" \r\n                               size=\"small\"\r\n                             />\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             <Box>\r\n                               <Typography variant=\"body2\" fontWeight={600}>\r\n                                 {venta.placa_vehiculo || 'Sin placa'}\r\n                               </Typography>\r\n                               <Chip \r\n                                 label={venta.tipo_vehiculo || 'N/A'} \r\n                                 color=\"secondary\" \r\n                                 size=\"small\"\r\n                               />\r\n                             </Box>\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             {venta.nombre_cliente ? (\r\n                               <Typography variant=\"body2\">\r\n                                 {venta.nombre_cliente} {venta.apellido_cliente}\r\n                               </Typography>\r\n                             ) : (\r\n                               <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                 Sin cliente\r\n                               </Typography>\r\n                             )}\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             <Chip\r\n                               label={getStatusLabel(venta.estado)}\r\n                               color={getStatusColor(venta.estado) as any}\r\n                               size=\"small\"\r\n                             />\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             {venta.monto_total ? (\r\n                               <Typography variant=\"body2\" fontWeight={600} color=\"success.main\">\r\n                                 {formatCurrency(venta.monto_total)}\r\n                               </Typography>\r\n                             ) : (\r\n                               <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                 Pendiente\r\n                               </Typography>\r\n                             )}\r\n                           </TableCell>\r\n                           <TableCell>\r\n                             <Box sx={{ display: 'flex', gap: 1 }}>\r\n                               <Tooltip title=\"Ver detalles\">\r\n                                 <IconButton size=\"small\" color=\"primary\">\r\n                                   <VisibilityIcon />\r\n                                 </IconButton>\r\n                               </Tooltip>\r\n                               \r\n                               {venta.estado === 'activa' && (\r\n                                 <>\r\n                                   <Tooltip title=\"Finalizar venta\">\r\n                                     <IconButton \r\n                                       size=\"small\" \r\n                                       color=\"success\"\r\n                                       onClick={() => openFinalizarVenta(venta)}\r\n                                     >\r\n                                       <CheckCircleIcon />\r\n                                     </IconButton>\r\n                                   </Tooltip>\r\n                                   \r\n                                   <Tooltip title=\"Cancelar venta\">\r\n                                     <IconButton \r\n                                       size=\"small\" \r\n                                       color=\"error\"\r\n                                       onClick={() => openCancelarVenta(venta)}\r\n                                     >\r\n                                       <CancelIcon />\r\n                                     </IconButton>\r\n                                   </Tooltip>\r\n                                 </>\r\n                               )}\r\n                             </Box>\r\n                           </TableCell>\r\n                         </TableRow>\r\n                       );\r\n                     })}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              \r\n              <TablePagination\r\n                rowsPerPageOptions={[5, 10, 25]}\r\n                component=\"div\"\r\n                count={filteredVentas.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                onPageChange={(_, newPage) => setPage(newPage)}\r\n                onRowsPerPageChange={(e) => {\r\n                  setRowsPerPage(parseInt(e.target.value, 10));\r\n                  setPage(0);\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Dialog para crear nueva venta */}\r\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <AddIcon color=\"primary\" />\r\n            Nueva Venta de Parqueamiento\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Grid container spacing={2} sx={{ mt: 1 }}>\r\n            <Grid item xs={12} md={6}>\r\n              <FormControl fullWidth required>\r\n                <InputLabel>Espacio</InputLabel>\r\n                <Select\r\n                  value={formData.id_espacio}\r\n                  label=\"Espacio\"\r\n                  onChange={(e) => setFormData({ ...formData, id_espacio: e.target.value as number })}\r\n                >\r\n                  {espacios.map((espacio) => (\r\n                    <MenuItem key={espacio.id_espacio} value={espacio.id_espacio}>\r\n                      {espacio.numero_espacio} - {espacio.tipo_vehiculo} (S/ {typeof espacio.tarifa_hora === 'number' ? espacio.tarifa_hora : 0}/h)\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Cliente (Opcional)</InputLabel>\r\n                <Select\r\n                  value={formData.id_cliente || ''}\r\n                  label=\"Cliente (Opcional)\"\r\n                  onChange={(e) => setFormData({ ...formData, id_cliente: e.target.value as number || undefined })}\r\n                >\r\n                  <MenuItem value=\"\">Sin cliente</MenuItem>\r\n                  {clientes.map((cliente) => (\r\n                    <MenuItem key={cliente.idCliente} value={cliente.idCliente}>\r\n                      {cliente.Nombre_Cliente} {cliente.Apellido_Cliente}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Placa del Vehículo *\"\r\n                value={formData.placa_vehiculo}\r\n                onChange={(e) => setFormData({ ...formData, placa_vehiculo: e.target.value.toUpperCase() })}\r\n                required\r\n                placeholder=\"ABC-123\"\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <FormControl fullWidth required>\r\n                <InputLabel>Tipo de Vehículo</InputLabel>\r\n                <Select\r\n                  value={formData.tipo_vehiculo}\r\n                  label=\"Tipo de Vehículo\"\r\n                  onChange={(e) => setFormData({ ...formData, tipo_vehiculo: e.target.value as string })}\r\n                >\r\n                  <MenuItem value=\"auto\">Auto</MenuItem>\r\n                  <MenuItem value=\"camioneta\">Camioneta</MenuItem>\r\n                  <MenuItem value=\"camion\">Camión</MenuItem>\r\n                  <MenuItem value=\"moto\">Moto</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Observaciones\"\r\n                value={formData.observaciones}\r\n                onChange={(e) => setFormData({ ...formData, observaciones: e.target.value })}\r\n                multiline\r\n                rows={3}\r\n                placeholder=\"Observaciones adicionales sobre la venta...\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog}>Cancelar</Button>\r\n          <Button onClick={handleSubmit} variant=\"contained\" sx={{ bgcolor: '#1976d2' }}>\r\n            Crear Venta\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog para finalizar venta */}\r\n      <Dialog open={openFinalizarDialog} onClose={() => setOpenFinalizarDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <CheckCircleIcon color=\"success\" />\r\n            Finalizar Venta #{selectedVenta?.id_venta}\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              ¿Estás seguro de que quieres finalizar esta venta?\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n              Se calculará el monto total basado en el tiempo transcurrido.\r\n            </Typography>\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Observaciones de Salida\"\r\n              value={finalizarForm.observaciones_salida}\r\n              onChange={(e) => setFinalizarForm({ observaciones_salida: e.target.value })}\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Observaciones sobre la salida del vehículo...\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenFinalizarDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleFinalizar} variant=\"contained\" color=\"success\">\r\n            Finalizar Venta\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog para cancelar venta */}\r\n      <Dialog open={openCancelarDialog} onClose={() => setOpenCancelarDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <CancelIcon color=\"error\" />\r\n            Cancelar Venta #{selectedVenta?.id_venta}\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              ¿Estás seguro de que quieres cancelar esta venta?\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n              Esta acción liberará el espacio de parqueamiento.\r\n            </Typography>\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Motivo de Cancelación *\"\r\n              value={cancelarForm.motivo_cancelacion}\r\n              onChange={(e) => setCancelarForm({ motivo_cancelacion: e.target.value })}\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Especifica el motivo de la cancelación...\"\r\n              required\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenCancelarDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleCancelar} variant=\"contained\" color=\"error\">\r\n            Cancelar Venta\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Ventas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}