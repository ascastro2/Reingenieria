{"ast":null,"code":"import _objectSpread from\"C:/Users/Asus/Documents/GitHub/Reingenieria/pos_parqueamiento_NEW/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Box,Typography,Button,Card,CardContent,Grid,Chip,IconButton,Tooltip,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Alert,CircularProgress,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination}from'@mui/material';import{Add as AddIcon,Remove as RemoveIcon,AccountBalance as AccountBalanceIcon,Refresh as RefreshIcon,Visibility as VisibilityIcon,LockOpen as LockOpenIcon,Lock as LockIcon}from'@mui/icons-material';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Caja=()=>{const[cajas,setCajas]=useState([]);const[cajaActual,setCajaActual]=useState(null);const[movimientos,setMovimientos]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[openAbrirDialog,setOpenAbrirDialog]=useState(false);const[openCerrarDialog,setOpenCerrarDialog]=useState(false);const[openAgregarDialog,setOpenAgregarDialog]=useState(false);const[openRetirarDialog,setOpenRetirarDialog]=useState(false);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[abrirForm,setAbrirForm]=useState({monto_inicial:0,observaciones:''});const[cerrarForm,setCerrarForm]=useState({monto_final:0,observaciones:''});const[movimientoForm,setMovimientoForm]=useState({monto:0,concepto:''});const fetchData=async()=>{try{setLoading(true);setError(null);const[cajasResponse,cajaActualResponse]=await Promise.all([axios.get('/api/caja'),axios.get('/api/caja/actual/estado')]);setCajas(cajasResponse.data.data);if(cajaActualResponse.data.data.estado==='abierta'){setCajaActual(cajaActualResponse.data.data);// Obtener movimientos de la caja actual\nconst movimientosResponse=await axios.get(\"/api/caja/\".concat(cajaActualResponse.data.data.id_caja,\"/movimientos\"));setMovimientos(movimientosResponse.data.data);}else{setCajaActual(null);setMovimientos([]);}}catch(error){console.error('Error al cargar datos de caja:',error);setError('Error al cargar los datos de caja');}finally{setLoading(false);}};useEffect(()=>{fetchData();},[]);const handleAbrirCaja=async()=>{try{await axios.post('/api/caja/abrir',abrirForm);fetchData();setOpenAbrirDialog(false);setAbrirForm({monto_inicial:0,observaciones:''});}catch(error){var _error$response,_error$response$data;console.error('Error al abrir caja:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error al abrir la caja');}};const handleCerrarCaja=async()=>{if(!cajaActual)return;try{await axios.put(\"/api/caja/\".concat(cajaActual.id_caja,\"/cerrar\"),cerrarForm);fetchData();setOpenCerrarDialog(false);setCerrarForm({monto_final:0,observaciones:''});}catch(error){var _error$response2,_error$response2$data;console.error('Error al cerrar caja:',error);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Error al cerrar la caja');}};const handleAgregarMonto=async()=>{if(!cajaActual)return;try{await axios.put(\"/api/caja/\".concat(cajaActual.id_caja,\"/agregar\"),movimientoForm);fetchData();setOpenAgregarDialog(false);setMovimientoForm({monto:0,concepto:''});}catch(error){var _error$response3,_error$response3$data;console.error('Error al agregar monto:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Error al agregar el monto');}};const handleRetirarMonto=async()=>{if(!cajaActual)return;try{await axios.put(\"/api/caja/\".concat(cajaActual.id_caja,\"/retirar\"),movimientoForm);fetchData();setOpenRetirarDialog(false);setMovimientoForm({monto:0,concepto:''});}catch(error){var _error$response4,_error$response4$data;console.error('Error al retirar monto:',error);setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Error al retirar el monto');}};const calcularSaldoActual=()=>{if(!cajaActual)return 0;const totalIngresos=movimientos.filter(m=>m.tipo_movimiento==='ingreso').reduce((sum,m)=>sum+m.monto,0);const totalEgresos=movimientos.filter(m=>m.tipo_movimiento==='egreso'||m.tipo_movimiento==='retiro').reduce((sum,m)=>sum+m.monto,0);return cajaActual.monto_inicial+totalIngresos-totalEgresos;};const formatCurrency=amount=>{return new Intl.NumberFormat('es-PE',{style:'currency',currency:'PEN'}).format(amount);};const formatDateTime=dateString=>{return new Date(dateString).toLocaleString('es-PE');};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"400px\",children:/*#__PURE__*/_jsx(CircularProgress,{size:60})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:4},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,sx:{color:'#1976d2',fontWeight:600},children:\"\\uD83C\\uDFE6 Control de Caja\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:\"Administra la apertura, cierre y reportes de caja\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:fetchData,children:\"Actualizar\"}),!cajaActual?/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(LockOpenIcon,{}),onClick:()=>setOpenAbrirDialog(true),sx:{bgcolor:'#4caf50'},children:\"Abrir Caja\"}):/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setOpenAgregarDialog(true),color:\"success\",children:\"Agregar\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RemoveIcon,{}),onClick:()=>setOpenRetirarDialog(true),color:\"warning\",children:\"Retirar\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(LockIcon,{}),onClick:()=>setOpenCerrarDialog(true),sx:{bgcolor:'#f44336'},children:\"Cerrar Caja\"})]})]})]}),cajaActual&&/*#__PURE__*/_jsx(Card,{sx:{mb:4,bgcolor:'#e8f5e8'},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(AccountBalanceIcon,{color:\"success\",sx:{fontSize:40}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"success.main\",fontWeight:600,children:\"Caja Abierta\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Abierta por: \",cajaActual.nombre_usuario,\" \",cajaActual.apellido_usuario]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Desde: \",formatDateTime(cajaActual.fecha_apertura)]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Card,{sx:{bgcolor:'white'},children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',py:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",fontWeight:600,children:formatCurrency(cajaActual.monto_inicial)}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:\"Monto Inicial\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Card,{sx:{bgcolor:'white'},children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center',py:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"success.main\",fontWeight:600,children:formatCurrency(calcularSaldoActual())}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:\"Saldo Actual\"})]})})})]})})]})})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"primary\",children:cajas.length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Total de Cajas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"success.main\",children:cajas.filter(c=>c.estado==='abierta').length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Cajas Abiertas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"info.main\",children:cajas.filter(c=>c.estado==='cerrada').length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Cajas Cerradas\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"warning.main\",children:formatCurrency(cajas.reduce((sum,c)=>sum+(c.total_ventas||0),0))}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Total Ventas\"})]})})})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},onClose:()=>setError(null),children:error}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{mb:3},children:\"Historial de Cajas\"}),cajas.length===0?/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',py:4,color:'text.secondary'},children:[/*#__PURE__*/_jsx(AccountBalanceIcon,{sx:{fontSize:60,mb:2,opacity:0.3}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"No hay cajas registradas\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Comienza abriendo la primera caja del sistema.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Estado\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Monto Inicial\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Monto Final\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Total Ventas\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Total Retiros\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Usuario\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Fecha Apertura\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Fecha Cierre\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:cajas.map(caja=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",fontWeight:600,children:[\"#\",caja.id_caja]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:caja.estado==='abierta'?'Abierta':'Cerrada',color:caja.estado==='abierta'?'success':'default',size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:600,children:formatCurrency(caja.monto_inicial)})}),/*#__PURE__*/_jsx(TableCell,{children:caja.monto_final?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",fontWeight:600,children:formatCurrency(caja.monto_final)}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{children:caja.total_ventas?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"success.main\",children:formatCurrency(caja.total_ventas)}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{children:caja.total_retiros?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error.main\",children:formatCurrency(caja.total_retiros)}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[caja.nombre_usuario,\" \",caja.apellido_usuario]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:formatDateTime(caja.fecha_apertura)})}),/*#__PURE__*/_jsx(TableCell,{children:caja.fecha_cierre?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:formatDateTime(caja.fecha_cierre)}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,justifyContent:'center'},children:/*#__PURE__*/_jsx(Tooltip,{title:\"Ver movimientos\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"primary\",onClick:()=>{// Implementar vista de movimientos\n},children:/*#__PURE__*/_jsx(VisibilityIcon,{})})})})})]},caja.id_caja))})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:cajas.length,rowsPerPage:rowsPerPage,page:page,onPageChange:(_,newPage)=>setPage(newPage),onRowsPerPageChange:e=>{setRowsPerPage(parseInt(e.target.value,10));setPage(0);}})]})]})}),/*#__PURE__*/_jsxs(Dialog,{open:openAbrirDialog,onClose:()=>setOpenAbrirDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(LockOpenIcon,{color:\"success\"}),\"Abrir Caja\"]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Monto Inicial *\",type:\"number\",value:abrirForm.monto_inicial,onChange:e=>setAbrirForm(_objectSpread(_objectSpread({},abrirForm),{},{monto_inicial:parseFloat(e.target.value)||0})),required:true,inputProps:{min:0,step:0.01},sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Observaciones\",value:abrirForm.observaciones,onChange:e=>setAbrirForm(_objectSpread(_objectSpread({},abrirForm),{},{observaciones:e.target.value})),multiline:true,rows:3,placeholder:\"Observaciones sobre la apertura de caja...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenAbrirDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAbrirCaja,variant:\"contained\",color:\"success\",children:\"Abrir Caja\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openCerrarDialog,onClose:()=>setOpenCerrarDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(LockIcon,{color:\"error\"}),\"Cerrar Caja\"]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",gutterBottom:true,children:[\"Saldo actual: \",/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(calcularSaldoActual())})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Monto Final en Caja *\",type:\"number\",value:cerrarForm.monto_final,onChange:e=>setCerrarForm(_objectSpread(_objectSpread({},cerrarForm),{},{monto_final:parseFloat(e.target.value)||0})),required:true,inputProps:{min:0,step:0.01},sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Observaciones\",value:cerrarForm.observaciones,onChange:e=>setCerrarForm(_objectSpread(_objectSpread({},cerrarForm),{},{observaciones:e.target.value})),multiline:true,rows:3,placeholder:\"Observaciones sobre el cierre de caja...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenCerrarDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCerrarCaja,variant:\"contained\",color:\"error\",children:\"Cerrar Caja\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openAgregarDialog,onClose:()=>setOpenAgregarDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(AddIcon,{color:\"success\"}),\"Agregar Monto a Caja\"]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Monto *\",type:\"number\",value:movimientoForm.monto,onChange:e=>setMovimientoForm(_objectSpread(_objectSpread({},movimientoForm),{},{monto:parseFloat(e.target.value)||0})),required:true,inputProps:{min:0.01,step:0.01},sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Concepto *\",value:movimientoForm.concepto,onChange:e=>setMovimientoForm(_objectSpread(_objectSpread({},movimientoForm),{},{concepto:e.target.value})),required:true,placeholder:\"Descripci\\xF3n del ingreso...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenAgregarDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAgregarMonto,variant:\"contained\",color:\"success\",children:\"Agregar\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openRetirarDialog,onClose:()=>setOpenRetirarDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(RemoveIcon,{color:\"warning\"}),\"Retirar Monto de Caja\"]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",gutterBottom:true,children:[\"Saldo disponible: \",/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(calcularSaldoActual())})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Monto *\",type:\"number\",value:movimientoForm.monto,onChange:e=>setMovimientoForm(_objectSpread(_objectSpread({},movimientoForm),{},{monto:parseFloat(e.target.value)||0})),required:true,inputProps:{min:0.01,max:calcularSaldoActual(),step:0.01},sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Concepto *\",value:movimientoForm.concepto,onChange:e=>setMovimientoForm(_objectSpread(_objectSpread({},movimientoForm),{},{concepto:e.target.value})),required:true,placeholder:\"Descripci\\xF3n del retiro...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenRetirarDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleRetirarMonto,variant:\"contained\",color:\"warning\",children:\"Retirar\"})]})]})]});};export default Caja;","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Button","Card","CardContent","Grid","Chip","IconButton","Tooltip","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Alert","CircularProgress","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","Add","AddIcon","Remove","RemoveIcon","AccountBalance","AccountBalanceIcon","Refresh","RefreshIcon","Visibility","VisibilityIcon","LockOpen","LockOpenIcon","Lock","LockIcon","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Caja","cajas","setCajas","cajaActual","setCajaActual","movimientos","setMovimientos","loading","setLoading","error","setError","openAbrirDialog","setOpenAbrirDialog","openCerrarDialog","setOpenCerrarDialog","openAgregarDialog","setOpenAgregarDialog","openRetirarDialog","setOpenRetirarDialog","page","setPage","rowsPerPage","setRowsPerPage","abrirForm","setAbrirForm","monto_inicial","observaciones","cerrarForm","setCerrarForm","monto_final","movimientoForm","setMovimientoForm","monto","concepto","fetchData","cajasResponse","cajaActualResponse","Promise","all","get","data","estado","movimientosResponse","concat","id_caja","console","handleAbrirCaja","post","_error$response","_error$response$data","response","handleCerrarCaja","put","_error$response2","_error$response2$data","handleAgregarMonto","_error$response3","_error$response3$data","handleRetirarMonto","_error$response4","_error$response4$data","calcularSaldoActual","totalIngresos","filter","m","tipo_movimiento","reduce","sum","totalEgresos","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDateTime","dateString","Date","toLocaleString","display","justifyContent","alignItems","minHeight","children","size","sx","mb","variant","component","gutterBottom","color","fontWeight","gap","startIcon","onClick","bgcolor","container","spacing","item","xs","md","fontSize","nombre_usuario","apellido_usuario","fecha_apertura","textAlign","py","sm","length","c","total_ventas","severity","onClose","opacity","align","map","caja","hover","label","total_retiros","fecha_cierre","title","rowsPerPageOptions","count","onPageChange","_","newPage","onRowsPerPageChange","e","parseInt","target","value","open","maxWidth","fullWidth","mt","type","onChange","_objectSpread","parseFloat","required","inputProps","min","step","multiline","rows","placeholder","max"],"sources":["C:/Users/Asus/Documents/GitHub/Reingenieria/pos_parqueamiento_NEW/client/src/pages/Caja/Caja.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Alert,\r\n  CircularProgress,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TablePagination\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Remove as RemoveIcon,\r\n  AccountBalance as AccountBalanceIcon,\r\n  Refresh as RefreshIcon,\r\n  Visibility as VisibilityIcon,\r\n  LockOpen as LockOpenIcon,\r\n  Lock as LockIcon\r\n} from '@mui/icons-material';\r\n\r\nimport axios from 'axios';\r\n\r\ninterface Caja {\r\n  id_caja: number;\r\n  fecha_apertura: string;\r\n  fecha_cierre?: string;\r\n  monto_inicial: number;\r\n  monto_final?: number;\r\n  estado: 'abierta' | 'cerrada';\r\n  id_usuario: number;\r\n  observaciones?: string;\r\n  total_ventas?: number;\r\n  total_retiros?: number;\r\n  nombre_usuario?: string;\r\n  apellido_usuario?: string;\r\n}\r\n\r\ninterface Movimiento {\r\n  id_movimiento: number;\r\n  id_caja: number;\r\n  tipo_movimiento: 'ingreso' | 'egreso' | 'retiro';\r\n  monto: number;\r\n  descripcion: string;\r\n  fecha_movimiento: string;\r\n  id_usuario: number;\r\n  nombre_usuario?: string;\r\n  apellido_usuario?: string;\r\n}\r\n\r\ninterface CajaForm {\r\n  monto_inicial: number;\r\n  observaciones: string;\r\n}\r\n\r\ninterface MovimientoForm {\r\n  monto: number;\r\n  concepto: string;\r\n}\r\n\r\nconst Caja: React.FC = () => {\r\n\r\n  const [cajas, setCajas] = useState<Caja[]>([]);\r\n  const [cajaActual, setCajaActual] = useState<Caja | null>(null);\r\n  const [movimientos, setMovimientos] = useState<Movimiento[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [openAbrirDialog, setOpenAbrirDialog] = useState(false);\r\n  const [openCerrarDialog, setOpenCerrarDialog] = useState(false);\r\n  const [openAgregarDialog, setOpenAgregarDialog] = useState(false);\r\n  const [openRetirarDialog, setOpenRetirarDialog] = useState(false);\r\n\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n\r\n  const [abrirForm, setAbrirForm] = useState<CajaForm>({\r\n    monto_inicial: 0,\r\n    observaciones: ''\r\n  });\r\n\r\n  const [cerrarForm, setCerrarForm] = useState({\r\n    monto_final: 0,\r\n    observaciones: ''\r\n  });\r\n\r\n  const [movimientoForm, setMovimientoForm] = useState<MovimientoForm>({\r\n    monto: 0,\r\n    concepto: ''\r\n  });\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const [cajasResponse, cajaActualResponse] = await Promise.all([\r\n        axios.get('/api/caja'),\r\n        axios.get('/api/caja/actual/estado')\r\n      ]);\r\n\r\n      setCajas(cajasResponse.data.data);\r\n      \r\n      if (cajaActualResponse.data.data.estado === 'abierta') {\r\n        setCajaActual(cajaActualResponse.data.data);\r\n        // Obtener movimientos de la caja actual\r\n        const movimientosResponse = await axios.get(`/api/caja/${cajaActualResponse.data.data.id_caja}/movimientos`);\r\n        setMovimientos(movimientosResponse.data.data);\r\n      } else {\r\n        setCajaActual(null);\r\n        setMovimientos([]);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error al cargar datos de caja:', error);\r\n      setError('Error al cargar los datos de caja');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAbrirCaja = async () => {\r\n    try {\r\n      await axios.post('/api/caja/abrir', abrirForm);\r\n      fetchData();\r\n      setOpenAbrirDialog(false);\r\n      setAbrirForm({ monto_inicial: 0, observaciones: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al abrir caja:', error);\r\n      setError(error.response?.data?.error || 'Error al abrir la caja');\r\n    }\r\n  };\r\n\r\n  const handleCerrarCaja = async () => {\r\n    if (!cajaActual) return;\r\n    \r\n    try {\r\n      await axios.put(`/api/caja/${cajaActual.id_caja}/cerrar`, cerrarForm);\r\n      fetchData();\r\n      setOpenCerrarDialog(false);\r\n      setCerrarForm({ monto_final: 0, observaciones: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al cerrar caja:', error);\r\n      setError(error.response?.data?.error || 'Error al cerrar la caja');\r\n    }\r\n  };\r\n\r\n  const handleAgregarMonto = async () => {\r\n    if (!cajaActual) return;\r\n    \r\n    try {\r\n      await axios.put(`/api/caja/${cajaActual.id_caja}/agregar`, movimientoForm);\r\n      fetchData();\r\n      setOpenAgregarDialog(false);\r\n      setMovimientoForm({ monto: 0, concepto: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al agregar monto:', error);\r\n      setError(error.response?.data?.error || 'Error al agregar el monto');\r\n    }\r\n  };\r\n\r\n  const handleRetirarMonto = async () => {\r\n    if (!cajaActual) return;\r\n    \r\n    try {\r\n      await axios.put(`/api/caja/${cajaActual.id_caja}/retirar`, movimientoForm);\r\n      fetchData();\r\n      setOpenRetirarDialog(false);\r\n      setMovimientoForm({ monto: 0, concepto: '' });\r\n    } catch (error: any) {\r\n      console.error('Error al retirar monto:', error);\r\n      setError(error.response?.data?.error || 'Error al retirar el monto');\r\n    }\r\n  };\r\n\r\n  const calcularSaldoActual = () => {\r\n    if (!cajaActual) return 0;\r\n    \r\n    const totalIngresos = movimientos\r\n      .filter(m => m.tipo_movimiento === 'ingreso')\r\n      .reduce((sum, m) => sum + m.monto, 0);\r\n    \r\n    const totalEgresos = movimientos\r\n      .filter(m => m.tipo_movimiento === 'egreso' || m.tipo_movimiento === 'retiro')\r\n      .reduce((sum, m) => sum + m.monto, 0);\r\n    \r\n    return cajaActual.monto_inicial + totalIngresos - totalEgresos;\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('es-PE', {\r\n      style: 'currency',\r\n      currency: 'PEN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDateTime = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('es-PE');\r\n  };\r\n\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n        <CircularProgress size={60} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {/* Header */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\r\n        <Box>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ color: '#1976d2', fontWeight: 600 }}>\r\n            🏦 Control de Caja\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\">\r\n            Administra la apertura, cierre y reportes de caja\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Box sx={{ display: 'flex', gap: 2 }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<RefreshIcon />}\r\n            onClick={fetchData}\r\n          >\r\n            Actualizar\r\n          </Button>\r\n          \r\n          {!cajaActual ? (\r\n            <Button\r\n              variant=\"contained\"\r\n              startIcon={<LockOpenIcon />}\r\n              onClick={() => setOpenAbrirDialog(true)}\r\n              sx={{ bgcolor: '#4caf50' }}\r\n            >\r\n              Abrir Caja\r\n            </Button>\r\n          ) : (\r\n            <Box sx={{ display: 'flex', gap: 1 }}>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => setOpenAgregarDialog(true)}\r\n                color=\"success\"\r\n              >\r\n                Agregar\r\n              </Button>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<RemoveIcon />}\r\n                onClick={() => setOpenRetirarDialog(true)}\r\n                color=\"warning\"\r\n              >\r\n                Retirar\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<LockIcon />}\r\n                onClick={() => setOpenCerrarDialog(true)}\r\n                sx={{ bgcolor: '#f44336' }}\r\n              >\r\n                Cerrar Caja\r\n              </Button>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Estado actual de la caja */}\r\n      {cajaActual && (\r\n        <Card sx={{ mb: 4, bgcolor: '#e8f5e8' }}>\r\n          <CardContent>\r\n            <Grid container spacing={3} alignItems=\"center\">\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                  <AccountBalanceIcon color=\"success\" sx={{ fontSize: 40 }} />\r\n                  <Box>\r\n                    <Typography variant=\"h5\" color=\"success.main\" fontWeight={600}>\r\n                      Caja Abierta\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Abierta por: {cajaActual.nombre_usuario} {cajaActual.apellido_usuario}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Desde: {formatDateTime(cajaActual.fecha_apertura)}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={6}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={6}>\r\n                    <Card sx={{ bgcolor: 'white' }}>\r\n                      <CardContent sx={{ textAlign: 'center', py: 2 }}>\r\n                        <Typography variant=\"h6\" color=\"primary\" fontWeight={600}>\r\n                          {formatCurrency(cajaActual.monto_inicial)}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" color=\"text.secondary\">\r\n                          Monto Inicial\r\n                        </Typography>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                  <Grid item xs={6}>\r\n                    <Card sx={{ bgcolor: 'white' }}>\r\n                      <CardContent sx={{ textAlign: 'center', py: 2 }}>\r\n                        <Typography variant=\"h6\" color=\"success.main\" fontWeight={600}>\r\n                          {formatCurrency(calcularSaldoActual())}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" color=\"text.secondary\">\r\n                          Saldo Actual\r\n                        </Typography>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Estadísticas rápidas */}\r\n      <Grid container spacing={3} sx={{ mb: 4 }}>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"primary\">\r\n                {cajas.length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Total de Cajas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"success.main\">\r\n                {cajas.filter(c => c.estado === 'abierta').length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Cajas Abiertas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"info.main\">\r\n                {cajas.filter(c => c.estado === 'cerrada').length}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Cajas Cerradas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={3}>\r\n          <Card>\r\n            <CardContent sx={{ textAlign: 'center' }}>\r\n              <Typography variant=\"h4\" color=\"warning.main\">\r\n                {formatCurrency(cajas.reduce((sum, c) => sum + (c.total_ventas || 0), 0))}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Total Ventas\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Mensaje de error */}\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Tabla de cajas */}\r\n      <Card>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom sx={{ mb: 3 }}>\r\n            Historial de Cajas\r\n          </Typography>\r\n\r\n          {cajas.length === 0 ? (\r\n            <Box sx={{ textAlign: 'center', py: 4, color: 'text.secondary' }}>\r\n              <AccountBalanceIcon sx={{ fontSize: 60, mb: 2, opacity: 0.3 }} />\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                No hay cajas registradas\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                Comienza abriendo la primera caja del sistema.\r\n              </Typography>\r\n            </Box>\r\n          ) : (\r\n            <>\r\n              <TableContainer component={Paper}>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>ID</TableCell>\r\n                      <TableCell>Estado</TableCell>\r\n                      <TableCell>Monto Inicial</TableCell>\r\n                      <TableCell>Monto Final</TableCell>\r\n                      <TableCell>Total Ventas</TableCell>\r\n                      <TableCell>Total Retiros</TableCell>\r\n                      <TableCell>Usuario</TableCell>\r\n                      <TableCell>Fecha Apertura</TableCell>\r\n                      <TableCell>Fecha Cierre</TableCell>\r\n                      <TableCell align=\"center\">Acciones</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {cajas.map((caja) => (\r\n                      <TableRow key={caja.id_caja} hover>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\" fontWeight={600}>\r\n                            #{caja.id_caja}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Chip\r\n                            label={caja.estado === 'abierta' ? 'Abierta' : 'Cerrada'}\r\n                            color={caja.estado === 'abierta' ? 'success' : 'default'}\r\n                            size=\"small\"\r\n                          />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\" fontWeight={600}>\r\n                            {formatCurrency(caja.monto_inicial)}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {caja.monto_final ? (\r\n                            <Typography variant=\"body2\" fontWeight={600}>\r\n                              {formatCurrency(caja.monto_final)}\r\n                            </Typography>\r\n                          ) : (\r\n                            <Typography variant=\"body2\" color=\"text.secondary\">\r\n                              -\r\n                            </Typography>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {caja.total_ventas ? (\r\n                            <Typography variant=\"body2\" color=\"success.main\">\r\n                              {formatCurrency(caja.total_ventas)}\r\n                            </Typography>\r\n                          ) : (\r\n                            <Typography variant=\"body2\" color=\"text.secondary\">\r\n                              -\r\n                            </Typography>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {caja.total_retiros ? (\r\n                            <Typography variant=\"body2\" color=\"error.main\">\r\n                              {formatCurrency(caja.total_retiros)}\r\n                            </Typography>\r\n                          ) : (\r\n                            <Typography variant=\"body2\" color=\"text.secondary\">\r\n                              -\r\n                            </Typography>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\">\r\n                            {caja.nombre_usuario} {caja.apellido_usuario}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\">\r\n                            {formatDateTime(caja.fecha_apertura)}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {caja.fecha_cierre ? (\r\n                            <Typography variant=\"body2\">\r\n                              {formatDateTime(caja.fecha_cierre)}\r\n                            </Typography>\r\n                          ) : (\r\n                            <Typography variant=\"body2\" color=\"text.secondary\">\r\n                              -\r\n                            </Typography>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell align=\"center\">\r\n                          <Box sx={{ display: 'flex', gap: 1, justifyContent: 'center' }}>\r\n                            <Tooltip title=\"Ver movimientos\">\r\n                              <IconButton \r\n                                size=\"small\" \r\n                                color=\"primary\"\r\n                                onClick={() => {\r\n                                  // Implementar vista de movimientos\r\n                                }}\r\n                              >\r\n                                <VisibilityIcon />\r\n                              </IconButton>\r\n                            </Tooltip>\r\n                          </Box>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n              \r\n              <TablePagination\r\n                rowsPerPageOptions={[5, 10, 25]}\r\n                component=\"div\"\r\n                count={cajas.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                onPageChange={(_, newPage) => setPage(newPage)}\r\n                onRowsPerPageChange={(e) => {\r\n                  setRowsPerPage(parseInt(e.target.value, 10));\r\n                  setPage(0);\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Dialog para abrir caja */}\r\n      <Dialog open={openAbrirDialog} onClose={() => setOpenAbrirDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <LockOpenIcon color=\"success\" />\r\n            Abrir Caja\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Monto Inicial *\"\r\n              type=\"number\"\r\n              value={abrirForm.monto_inicial}\r\n              onChange={(e) => setAbrirForm({ ...abrirForm, monto_inicial: parseFloat(e.target.value) || 0 })}\r\n              required\r\n              inputProps={{ min: 0, step: 0.01 }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Observaciones\"\r\n              value={abrirForm.observaciones}\r\n              onChange={(e) => setAbrirForm({ ...abrirForm, observaciones: e.target.value })}\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Observaciones sobre la apertura de caja...\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenAbrirDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleAbrirCaja} variant=\"contained\" color=\"success\">\r\n            Abrir Caja\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog para cerrar caja */}\r\n      <Dialog open={openCerrarDialog} onClose={() => setOpenCerrarDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <LockIcon color=\"error\" />\r\n            Cerrar Caja\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Saldo actual: <strong>{formatCurrency(calcularSaldoActual())}</strong>\r\n            </Typography>\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Monto Final en Caja *\"\r\n              type=\"number\"\r\n              value={cerrarForm.monto_final}\r\n              onChange={(e) => setCerrarForm({ ...cerrarForm, monto_final: parseFloat(e.target.value) || 0 })}\r\n              required\r\n              inputProps={{ min: 0, step: 0.01 }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Observaciones\"\r\n              value={cerrarForm.observaciones}\r\n              onChange={(e) => setCerrarForm({ ...cerrarForm, observaciones: e.target.value })}\r\n              multiline\r\n              rows={3}\r\n              placeholder=\"Observaciones sobre el cierre de caja...\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenCerrarDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleCerrarCaja} variant=\"contained\" color=\"error\">\r\n            Cerrar Caja\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog para agregar monto */}\r\n      <Dialog open={openAgregarDialog} onClose={() => setOpenAgregarDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <AddIcon color=\"success\" />\r\n            Agregar Monto a Caja\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Monto *\"\r\n              type=\"number\"\r\n              value={movimientoForm.monto}\r\n              onChange={(e) => setMovimientoForm({ ...movimientoForm, monto: parseFloat(e.target.value) || 0 })}\r\n              required\r\n              inputProps={{ min: 0.01, step: 0.01 }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Concepto *\"\r\n              value={movimientoForm.concepto}\r\n              onChange={(e) => setMovimientoForm({ ...movimientoForm, concepto: e.target.value })}\r\n              required\r\n              placeholder=\"Descripción del ingreso...\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenAgregarDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleAgregarMonto} variant=\"contained\" color=\"success\">\r\n            Agregar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog para retirar monto */}\r\n      <Dialog open={openRetirarDialog} onClose={() => setOpenRetirarDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <RemoveIcon color=\"warning\" />\r\n            Retirar Monto de Caja\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Saldo disponible: <strong>{formatCurrency(calcularSaldoActual())}</strong>\r\n            </Typography>\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Monto *\"\r\n              type=\"number\"\r\n              value={movimientoForm.monto}\r\n              onChange={(e) => setMovimientoForm({ ...movimientoForm, monto: parseFloat(e.target.value) || 0 })}\r\n              required\r\n              inputProps={{ min: 0.01, max: calcularSaldoActual(), step: 0.01 }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Concepto *\"\r\n              value={movimientoForm.concepto}\r\n              onChange={(e) => setMovimientoForm({ ...movimientoForm, concepto: e.target.value })}\r\n              required\r\n              placeholder=\"Descripción del retiro...\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenRetirarDialog(false)}>Cancelar</Button>\r\n          <Button onClick={handleRetirarMonto} variant=\"contained\" color=\"warning\">\r\n            Retirar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Caja;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}